"use strict";(self.webpackChunkreact_chat_app=self.webpackChunkreact_chat_app||[]).push([[2775,8527,714,2611,8263,5665,3693,3201,4302,9599,3537],{714:function(e,n,t){t.r(n),t.d(n,{Options:function(){return r}});t(2791);var a=t(9930),s=t(184),r=function(e){var n=e.onReply,t=e.onDelete,r=e.onCopy,o=e.selector,c=e.date,i=e.msgId,l=e.msg;return(0,s.jsxs)(a.DropDown,{selector:o,placement:"bottom",children:[(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",onClick:function(){return n(c,i)},children:[(0,s.jsx)("span",{children:"Reply"}),(0,s.jsx)("i",{className:"bx-share"})]}),(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",children:[(0,s.jsx)("span",{children:"Forward"}),(0,s.jsx)("i",{className:"bx-share-alt"})]}),(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",onClick:function(){return r(l)},children:[(0,s.jsx)("span",{children:"Copy"}),(0,s.jsx)("i",{className:"bx-copy"})]}),(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",children:[(0,s.jsx)("span",{children:"Mark as Unread"}),(0,s.jsx)("i",{className:"bx-message-error"})]}),(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",onClick:function(){return t(c,i)},children:[(0,s.jsx)("span",{children:"Delete"}),(0,s.jsx)("i",{className:"bx-trash"})]})]})}},2611:function(e,n,t){t.r(n),t.d(n,{Reaction:function(){return c}});t(2791);var a=t(9930),s=t(2703),r=t(8263),o=t(184),c=function(e){var n=e.reactions,t=e.selector,c=e.onClick;return(0,o.jsx)(a.DropDown,{selector:t,className:r.default.container,placement:"bottom",children:n.map((function(e,n){return(0,o.jsx)(a.DropDownItem,{className:r.default.wrapper,onClick:function(){return c(e)},children:(0,o.jsx)("img",{id:e,src:(0,s.getReactionUrl)(e)})},n)}))})}},2775:function(e,n,t){t.r(n),t.d(n,{Conversation:function(){return x}});var a=t(4165),s=t(4942),r=t(1413),o=t(5861),c=t(885),i=t(2791),l=t(2703),u=t(2611),d=t(714),p=t(2426),m=t.n(p),f=t(8527),_=t(5665),h=t(3201),v=t(184),x=function(e){var n=e.chats,t=e.onDelete,p=e.onCopy,x=e.onReply,g=e.userId,j=e.focusMsgById,y=e.unReadMsg,N=e.isGroupChat,C=e.reactionList,k=e.handleReaction,w=(0,i.useState)({reaction:!1,seen:!1}),R=(0,c.Z)(w,2),Z=R[0],D=R[1],I=(0,i.useState)(),b=(0,c.Z)(I,2),P=b[0],S=b[1],M=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){var t,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.msgId,o=n.type,!Z[o]){e.next=3;break}return e.abrupt("return",D((0,r.Z)((0,r.Z)({},Z),{},(0,s.Z)({},o,!1))));case 3:S(t),D((0,r.Z)((0,r.Z)({},Z),{},(0,s.Z)({},o,!0)));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,v.jsxs)(i.Fragment,{children:[n.map((function(e,a){var o=e.day,c=e.messages;return(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)("div",{className:f.default.date,children:(0,v.jsx)("span",{children:m()(o).format("D MMMM YYYY")})}),(0,v.jsx)("div",{className:f.default.container,children:c.map((function(e,o){var _=e.msg,h=e.date,w=e.sender,R=(w=void 0===w?{}:w).id,Z=void 0===R?null:R,D=w.name,I=void 0===D?null:D,b=w.avatar,P=void 0===b?null:b,S=e._id,B=e.seen,O=e.reply,U=void 0===O?null:O,F=e.reactions,A=e.totalReactions;return(0,v.jsxs)(i.Fragment,{children:[y.id&&y.id===S&&(0,v.jsx)("div",{className:f.default.unread_msg,children:(0,v.jsxs)("span",{children:[y.total," Unread Message",y.total>1&&"s"]})}),(0,v.jsxs)("div",(0,r.Z)((0,r.Z)((0,r.Z)({className:(0,l.classNames)(f.default.chat_wrapper,(0,s.Z)({},f.default.end,g===Z)),msgid:S},0===a&&0===o&&{first:""}),a===n.length-1&&o===c.length-1&&{last:""}),{},{children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",(0,r.Z)((0,r.Z)({className:f.default.chat_card},g!==Z&&{id:"reaction-".concat(S)}),{},{children:[U&&(0,v.jsx)("div",{className:f.default.reply_card,onClick:function(){return j(U._id,"smooth")},children:(0,v.jsx)("span",{children:U.msg})}),(0,v.jsxs)("div",{children:[N&&Z!==g&&(0,v.jsx)("span",{style:{color:P},className:f.default.user_name,children:I.split(" ")[0]}),(0,v.jsx)("span",{children:_})]}),(0,v.jsxs)("div",{className:f.default.msg_time,children:[(0,v.jsx)("i",{className:"bx-time ".concat(f.default.clock)}),(0,v.jsx)("span",{children:m()(new Date(h)).format("h:mm a")}),g===Z&&(0,v.jsx)("i",{className:"bx bx-check-double ".concat(f.default.tick),seen:B.toString(),onClick:function(e){e.stopPropagation(),M({msgId:S,type:"seen"})}})]})]})),(0,v.jsx)("div",{className:f.default.options,children:(0,v.jsx)("i",{className:"bx-dots-vertical-rounded",id:"option-".concat(S)})})]}),A>0&&(0,v.jsxs)("div",{className:f.default.reactions,onClick:function(){return M({msgId:S,type:"reaction"})},children:[F.map((function(e,n){return(0,v.jsx)("img",{src:(0,l.getReactionUrl)(e)},n)})),(0,v.jsx)("span",{children:A})]})]})),(0,v.jsx)(d.Options,{selector:"#option-".concat(S),onCopy:p,onReply:x,onDelete:t,date:h,msgId:S,msg:_}),(0,v.jsx)(u.Reaction,{selector:"#reaction-".concat(S),reactions:C,onClick:function(e){return k(e,S)}})]},S)}))})]},a)})),(0,v.jsx)(_.default,{isOpen:Z.reaction,msgId:P,toggle:function(){return M({type:"reaction"})}}),(0,v.jsx)(h.default,{isOpen:Z.seen,msgId:P,toggle:function(){return M({type:"seen"})}})]})}},5665:function(e,n,t){t.r(n);var a=t(4165),s=t(5861),r=t(885),o=t(2791),c=t(9930),i=t(2703),l=t(3537),u=t(3693),d=t(184);n.default=function(e){var n=e.isOpen,t=e.toggle,p=e.msgId,m=(0,o.useState)([]),f=(0,r.Z)(m,2),_=f[0],h=f[1],v=(0,o.useState)([]),x=(0,r.Z)(v,2),g=x[0],j=x[1],y=(0,o.useState)(),N=(0,r.Z)(y,2),C=(N[0],N[1]);(0,o.useEffect)((function(){n&&k()}),[n]);var k=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,s,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={page:1,limit:25},e.prev=1,e.next=4,Promise.all([(0,l.getReactions)(p),(0,l.getReactionsByType)(p,n)]);case 4:t=e.sent,s=(0,r.Z)(t,2),o=s[0].data.data,c=s[1].data.data,h(o),j(c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,s,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={page:1,limit:25,type:n},e.prev=1,e.next=4,(0,l.getReactionsByType)(p,t);case 4:s=e.sent,r=s.data.data,C(n),j(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}();return(0,d.jsx)(c.Modal,{isOpen:n,toggle:t,children:(0,d.jsxs)("div",{className:u.default.popup,children:[(0,d.jsxs)("div",{className:u.default.reactions,children:[(0,d.jsx)("div",{className:u.default.all,onClick:function(){return w()},children:(0,d.jsx)("span",{children:"All"})}),null===_||void 0===_?void 0:_.map((function(e,n){var t=e.reaction,a=e.total;return(0,d.jsxs)("div",{className:u.default.card,onClick:function(){return w(t)},children:[(0,d.jsx)("img",{src:(0,i.getReactionUrl)(t)}),(0,d.jsx)("span",{children:a})]},n)}))]}),(0,d.jsx)("div",{className:u.default.users,children:g.map((function(e,n){var t=e.avatar,a=(e.email,e.id),s=e.name,r=e.status;e.date;return(0,d.jsxs)("div",{className:u.default.card,children:[(0,d.jsx)(c.Avatar,{name:s,size:40,status:r,userId:a,src:t}),(0,d.jsx)("span",{children:s})]},n)}))})]})})}},3201:function(e,n,t){t.r(n);t(2791);var a=t(9930),s=t(4302),r=t(184);n.default=function(e){var n=e.isOpen,t=e.toggle,o=[];return(0,r.jsx)(a.Modal,{isOpen:n,toggle:t,children:(0,r.jsxs)("div",{className:s.default.popup,children:[(0,r.jsx)("div",{className:s.default.reactions,children:(0,r.jsx)("div",{className:s.default.all,children:(0,r.jsx)("span",{children:"Seen"})})}),(0,r.jsx)("div",{className:s.default.users,children:null===o||void 0===o?void 0:o.map((function(e,n){var t=e.avatar,o=(e.email,e.id),c=e.name,i=e.status;return(0,r.jsxs)("div",{className:s.default.card,children:[(0,r.jsx)(a.Avatar,{name:c,size:40,status:i,userId:o,src:t}),(0,r.jsx)("span",{children:c})]},n)}))})]})})}},3537:function(e,n,t){t.r(n),t.d(n,{createMessage:function(){return r},getReactions:function(){return o},getReactionsByType:function(){return c},getSeenByMsgId:function(){return i}});var a=t(9599),s=t(77),r=function(e,n){return(0,a.axios)({url:"".concat(s.endpoints.message.createMessage,"/").concat(e),method:"post",data:n})},o=function(e){return(0,a.axios)({url:"".concat(s.endpoints.message.getReaction,"/").concat(e),method:"get"})},c=function(e,n){return(0,a.axios)({url:"".concat(s.endpoints.message.getReactionByType,"/").concat(e),method:"get",params:n})},i=function(e,n){return(0,a.axios)({url:"".concat(s.endpoints.message.getSeen,"/").concat(e),method:"get",params:n})}},9599:function(e,n,t){t.r(n),t.d(n,{axios:function(){return c}});var a=t(4569),s=t.n(a),r=t(2703),o=t(77),c=s().create({baseURL:o.baseURL});c.interceptors.request.use((function(e){var n=(0,r.cookies)().get("authToken");return n&&(e.headers.Authorization=n),e}),(function(e){return Promise.reject(e)})),c.interceptors.response.use((function(e){return e}),(function(e){var n;return 401===e.response.status&&document.dispatchEvent(new CustomEvent("logout")),Promise.reject(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data)}))},8527:function(e,n,t){t.r(n),n.default={container:"Conversation_container__I7CJi",chat_wrapper:"Conversation_chat_wrapper__S3O8R",end:"Conversation_end__ZMbi5",chat_card:"Conversation_chat_card__jz70L",reply_card:"Conversation_reply_card__AEy90",msg_time:"Conversation_msg_time__wN53F",tick:"Conversation_tick__RkyEe",reactions:"Conversation_reactions__faDG2",user_name:"Conversation_user_name__RDhDd",clock:"Conversation_clock__y4n8i",options:"Conversation_options__WLSBI",date:"Conversation_date__ZfQTB",unread_msg:"Conversation_unread_msg__yFItk",section:"Conversation_section__wG88I",load:"Conversation_load__rqCbg"}},8263:function(e,n,t){t.r(n),n.default={container:"Reaction_container__yXj24",wrapper:"Reaction_wrapper__m5dkH"}},3693:function(e,n,t){t.r(n),n.default={popup:"ReactionPopup_popup__yt4AZ",reactions:"ReactionPopup_reactions__3HDB6",all:"ReactionPopup_all__nfaPI",card:"ReactionPopup_card__P+lgl",users:"ReactionPopup_users__81RJu"}},4302:function(e,n,t){t.r(n),n.default={popup:"SeenPopup_popup__d-7Be",reactions:"SeenPopup_reactions__DkyZZ",all:"SeenPopup_all__2FlpU",users:"SeenPopup_users__Ehebn",card:"SeenPopup_card__irnNc"}}}]);
//# sourceMappingURL=2775.5a441034.chunk.js.map