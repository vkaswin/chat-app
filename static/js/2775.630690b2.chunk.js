"use strict";(self.webpackChunkreact_chat_app=self.webpackChunkreact_chat_app||[]).push([[2775,8527,714,2611,8263,5698,9417,7121,7321,9599,3537],{714:function(e,n,t){t.r(n),t.d(n,{Options:function(){return r}});t(2791);var a=t(9930),s=t(184),r=function(e){var n=e.onReply,t=e.onDelete,r=e.onCopy,o=e.selector,c=e.date,i=e.msgId,l=e.msg;return(0,s.jsxs)(a.DropDown,{selector:o,placement:"bottom",children:[(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",onClick:function(){return n(c,i)},children:[(0,s.jsx)("span",{children:"Reply"}),(0,s.jsx)("i",{className:"bx-share"})]}),(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",children:[(0,s.jsx)("span",{children:"Forward"}),(0,s.jsx)("i",{className:"bx-share-alt"})]}),(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",onClick:function(){return r(l)},children:[(0,s.jsx)("span",{children:"Copy"}),(0,s.jsx)("i",{className:"bx-copy"})]}),(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",children:[(0,s.jsx)("span",{children:"Mark as Unread"}),(0,s.jsx)("i",{className:"bx-message-error"})]}),(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",onClick:function(){return t(c,i)},children:[(0,s.jsx)("span",{children:"Delete"}),(0,s.jsx)("i",{className:"bx-trash"})]})]})}},2611:function(e,n,t){t.r(n),t.d(n,{Reaction:function(){return c}});t(2791);var a=t(9930),s=t(2703),r=t(8263),o=t(184),c=function(e){var n=e.reactions,t=e.selector,c=e.onClick;return(0,o.jsx)(a.DropDown,{selector:t,className:r.default.container,placement:"bottom",children:n.map((function(e,n){return(0,o.jsx)(a.DropDownItem,{className:r.default.wrapper,onClick:function(){return c(e)},children:(0,o.jsx)("img",{id:e,src:(0,s.getReactionUrl)(e),loading:"lazy",alt:""})},n)}))})}},5698:function(e,n,t){t.r(n);var a=t(4165),s=t(5861),r=t(885),o=t(2791),c=t(9930),i=t(2703),l=t(3537),d=t(9417),u=t(184);n.default=function(e){var n=e.isOpen,t=e.toggle,p=e.msgId,m=(0,o.useState)([]),f=(0,r.Z)(m,2),_=f[0],v=f[1],x=(0,o.useState)([]),h=(0,r.Z)(x,2),g=h[0],j=h[1],y=(0,o.useState)(),C=(0,r.Z)(y,2),N=(C[0],C[1]);(0,o.useEffect)((function(){n&&k()}),[n,p]);var k=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,s,o,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={page:1,limit:25},e.prev=1,e.next=4,Promise.all([(0,l.getReactions)(p),(0,l.getReactionsByType)(p,n)]);case 4:t=e.sent,s=(0,r.Z)(t,2),o=s[0].data.data,i=s[1].data.data,v(o),j(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),(0,c.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,s,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={page:1,limit:25,type:n},e.prev=1,e.next=4,(0,l.getReactionsByType)(p,t);case 4:s=e.sent,r=s.data.data,N(n),j(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,c.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}();return(0,u.jsx)(c.Modal,{isOpen:n,toggle:t,children:(0,u.jsxs)("div",{className:d.default.popup,children:[(0,u.jsxs)("div",{className:d.default.reactions,children:[(0,u.jsx)("div",{className:d.default.all,onClick:function(){return w()},children:(0,u.jsx)("span",{children:"All"})}),null===_||void 0===_?void 0:_.map((function(e,n){var t=e.reaction,a=e.total;return(0,u.jsxs)("div",{className:d.default.card,onClick:function(){return w(t)},children:[(0,u.jsx)("img",{src:(0,i.getReactionUrl)(t),loading:"lazy",alt:""}),(0,u.jsx)("span",{children:a})]},n)}))]}),(0,u.jsx)("div",{className:d.default.users,children:g.map((function(e,n){var t=e.avatar,a=(e.email,e.id),s=e.name,r=e.status,o=(e.date,e.colorCode);return(0,u.jsxs)("div",{className:d.default.card,children:[(0,u.jsx)(c.Avatar,{name:s,size:40,status:r,userId:a,src:t||o}),(0,u.jsx)("span",{children:s})]},n)}))})]})})}},7121:function(e,n,t){t.r(n);var a=t(4165),s=t(5861),r=t(885),o=t(2791),c=t(9930),i=t(3537),l=t(7321),d=t(184);n.default=function(e){var n=e.isOpen,t=e.toggle,u=e.msgId,p=(0,o.useState)([]),m=(0,r.Z)(p,2),f=m[0],_=m[1];(0,o.useEffect)((function(){n&&v(1)}),[n,u]);var v=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,s,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={page:n,limit:25},e.prev=1,e.next=4,(0,i.getSeenByMsgId)(u,t);case 4:s=e.sent,r=s.data.data,_(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,c.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,d.jsx)(c.Modal,{isOpen:n,toggle:t,children:(0,d.jsxs)("div",{className:l.default.popup,children:[(0,d.jsx)("div",{className:l.default.reactions,children:(0,d.jsx)("div",{className:l.default.all,children:(0,d.jsx)("span",{children:"Seen"})})}),(0,d.jsx)("div",{className:l.default.users,children:f.map((function(e,n){var t=e.avatar,a=(e.email,e.id),s=e.name,r=e.status,o=(e.date,e.colorCode);return(0,d.jsxs)("div",{className:l.default.card,children:[(0,d.jsx)(c.Avatar,{name:s,size:40,status:r,userId:a,src:t||o}),(0,d.jsx)("span",{children:s})]},n)}))})]})})}},2775:function(e,n,t){t.r(n),t.d(n,{Conversation:function(){return v}});var a=t(4942),s=t(1413),r=t(885),o=t(2791),c=t(2703),i=t(2611),l=t(714),d=t(2426),u=t.n(d),p=t(8527),m=t(5698),f=t(7121),_=t(184),v=function(e){var n=e.chats,t=e.onDelete,d=e.onCopy,v=e.onReply,x=e.userId,h=e.focusMsgById,g=e.unReadMsg,j=e.isGroupChat,y=e.reactionList,C=e.handleReaction,N=(0,o.useState)({reaction:!1,seen:!1,msgId:null}),k=(0,r.Z)(N,2),w=k[0],R=k[1],I=function(e){var n,t=e.msgId,r=e.type;R((0,s.Z)((0,s.Z)({},w),{},(n={},(0,a.Z)(n,r,!w[r]),(0,a.Z)(n,"msgId",t),n)))};return(0,_.jsxs)(o.Fragment,{children:[n.map((function(e,r){var m=e.day,f=e.messages;return(0,_.jsxs)(o.Fragment,{children:[(0,_.jsx)("div",{className:p.default.date,children:(0,_.jsx)("span",{children:u()(m).format("D MMMM YYYY")})}),(0,_.jsx)("div",{className:p.default.container,children:f.map((function(e,m){var N=e.msg,k=e.date,w=e.sender,R=(w=void 0===w?{}:w).id,Z=w.name,D=(w.avatar,w.colorCode),b=e._id,S=e.seen,M=e.reply,P=void 0===M?null:M,B=e.reactions,O=e.totalReactions;return(0,_.jsxs)(o.Fragment,{children:[g.id&&g.id===b&&(0,_.jsx)("div",{className:p.default.unread_msg,children:(0,_.jsxs)("span",{children:[g.total," Unread Message",g.total>1&&"s"]})}),(0,_.jsxs)("div",(0,s.Z)((0,s.Z)((0,s.Z)({className:(0,c.classNames)(p.default.chat_wrapper,(0,a.Z)({},p.default.end,x===R)),msgid:b},0===r&&0===m&&{first:""}),r===n.length-1&&m===f.length-1&&{last:""}),{},{children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",(0,s.Z)((0,s.Z)({className:p.default.chat_card},x!==R&&{id:"reaction-".concat(b)}),{},{children:[P&&(0,_.jsx)("div",{className:p.default.reply_card,onClick:function(){return h(P._id,"smooth")},children:(0,_.jsx)("span",{children:P.msg})}),(0,_.jsxs)("div",{children:[j&&R!==x&&(0,_.jsx)("span",{style:{color:D},className:p.default.user_name,children:Z.split(" ")[0]}),(0,_.jsx)("span",{children:N})]}),(0,_.jsxs)("div",{className:p.default.msg_time,children:[(0,_.jsx)("i",{className:"bx-time ".concat(p.default.clock)}),(0,_.jsx)("span",{children:u()(new Date(k)).format("h:mm a")}),x===R&&(0,_.jsx)("i",{className:"bx bx-check-double ".concat(p.default.tick),seen:S.toString(),onClick:function(){I({msgId:b,type:"seen"})}})]})]})),(0,_.jsx)("div",{className:p.default.options,children:(0,_.jsx)("i",{className:"bx-dots-vertical-rounded",id:"option-".concat(b)})})]}),O>0&&(0,_.jsxs)("div",{className:p.default.reactions,onClick:function(){return I({msgId:b,type:"reaction"})},children:[B.map((function(e,n){return(0,_.jsx)("img",{src:(0,c.getReactionUrl)(e),loading:"lazy",alt:""},n)})),(0,_.jsx)("span",{children:O})]})]})),(0,_.jsx)(l.Options,{selector:"#option-".concat(b),onCopy:d,onReply:v,onDelete:t,date:k,msgId:b,msg:N}),(0,_.jsx)(i.Reaction,{selector:"#reaction-".concat(b),reactions:y,onClick:function(e){return C(e,b)}})]},b)}))})]},r)})),(0,_.jsx)(m.default,{isOpen:w.reaction,msgId:w.msgId,toggle:function(){return I({type:"reaction"})}}),(0,_.jsx)(f.default,{isOpen:w.seen,msgId:w.msgId,toggle:function(){return I({type:"seen"})}})]})}},3537:function(e,n,t){t.r(n),t.d(n,{createMessage:function(){return r},getReactions:function(){return o},getReactionsByType:function(){return c},getSeenByMsgId:function(){return i}});var a=t(9599),s=t(77),r=function(e,n){return(0,a.axios)({url:"".concat(s.endpoints.message.createMessage,"/").concat(e),method:"post",data:n})},o=function(e){return(0,a.axios)({url:"".concat(s.endpoints.message.getReaction,"/").concat(e),method:"get"})},c=function(e,n){return(0,a.axios)({url:"".concat(s.endpoints.message.getReactionByType,"/").concat(e),method:"get",params:n})},i=function(e,n){return(0,a.axios)({url:"".concat(s.endpoints.message.getSeen,"/").concat(e),method:"get",params:n})}},9599:function(e,n,t){t.r(n),t.d(n,{axios:function(){return c}});var a=t(4569),s=t.n(a),r=t(2703),o=t(77),c=s().create({baseURL:o.baseURL});c.interceptors.request.use((function(e){var n=(0,r.cookies)().get("authToken");return n&&(e.headers.Authorization=n),e}),(function(e){return Promise.reject(e)})),c.interceptors.response.use((function(e){return e}),(function(e){var n;return 401===e.response.status&&document.dispatchEvent(new CustomEvent("logout")),Promise.reject(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data)}))},8527:function(e,n,t){t.r(n),n.default={container:"Conversation_container__I7CJi",chat_wrapper:"Conversation_chat_wrapper__S3O8R",end:"Conversation_end__ZMbi5",chat_card:"Conversation_chat_card__jz70L",reply_card:"Conversation_reply_card__AEy90",msg_time:"Conversation_msg_time__wN53F",tick:"Conversation_tick__RkyEe",reactions:"Conversation_reactions__faDG2",user_name:"Conversation_user_name__RDhDd",clock:"Conversation_clock__y4n8i",options:"Conversation_options__WLSBI",date:"Conversation_date__ZfQTB",unread_msg:"Conversation_unread_msg__yFItk",section:"Conversation_section__wG88I",load:"Conversation_load__rqCbg"}},8263:function(e,n,t){t.r(n),n.default={container:"Reaction_container__yXj24",wrapper:"Reaction_wrapper__m5dkH"}},9417:function(e,n,t){t.r(n),n.default={popup:"ReactionPopup_popup__aIJrS",reactions:"ReactionPopup_reactions__GiKWs",all:"ReactionPopup_all__Ofebr",card:"ReactionPopup_card__i6T3l",users:"ReactionPopup_users__zmbBG"}},7321:function(e,n,t){t.r(n),n.default={popup:"SeenPopup_popup__Y4qhk",reactions:"SeenPopup_reactions__MG2fO",all:"SeenPopup_all__r9B82",users:"SeenPopup_users__L5xMC",card:"SeenPopup_card__FRfpx"}}}]);
//# sourceMappingURL=2775.630690b2.chunk.js.map