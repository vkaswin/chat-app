"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[2775,8527,714,2611,8263,5698,9417,7121,7321,9599,3537],{714:function(e,n,t){t.r(n),t.d(n,{Options:function(){return r}});t(2791);var a=t(9930),s=t(184),r=function(e){var n=e.onReply,t=e.onDelete,r=e.onCopy,o=e.selector,c=e.date,i=e.msgId,l=e.msg;return(0,s.jsxs)(a.DropDown,{selector:o,placement:"bottom",children:[(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",onClick:function(){return n(c,i)},children:[(0,s.jsx)("span",{children:"Reply"}),(0,s.jsx)("i",{className:"bx-share"})]}),(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",children:[(0,s.jsx)("span",{children:"Forward"}),(0,s.jsx)("i",{className:"bx-share-alt"})]}),(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",onClick:function(){return r(l)},children:[(0,s.jsx)("span",{children:"Copy"}),(0,s.jsx)("i",{className:"bx-copy"})]}),(0,s.jsxs)(a.DropDownItem,{className:"dropdown-option",onClick:function(){return t(c,i)},children:[(0,s.jsx)("span",{children:"Delete"}),(0,s.jsx)("i",{className:"bx-trash"})]})]})}},2611:function(e,n,t){t.r(n),t.d(n,{Reaction:function(){return c}});t(2791);var a=t(9930),s=t(2703),r=t(8263),o=t(184),c=function(e){var n=e.reactions,t=e.selector,c=e.onClick;return(0,o.jsx)(a.DropDown,{selector:t,className:r.default.container,placement:"bottom-start",children:n.map((function(e,n){return(0,o.jsx)(a.DropDownItem,{className:r.default.wrapper,onClick:function(){return c(e)},children:(0,o.jsx)("img",{id:e,src:(0,s.getReactionUrl)(e),loading:"lazy",alt:""})},n)}))})}},5698:function(e,n,t){t.r(n);var a=t(4165),s=t(5861),r=t(885),o=t(2791),c=t(9930),i=t(2703),l=t(3537),u=t(9417),d=t(184);n.default=function(e){var n=e.msgId,t=e.clearMsgId,p=(0,o.useState)([]),m=(0,r.Z)(p,2),f=m[0],_=m[1],v=(0,o.useState)([]),h=(0,r.Z)(v,2),x=h[0],g=h[1],j=(0,o.useState)(),y=(0,r.Z)(j,2),C=(y[0],y[1]),N=(0,o.useState)(!1),k=(0,r.Z)(N,2),R=k[0],w=k[1];(0,o.useEffect)((function(){n&&I()}),[n]);var I=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,s,o,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={page:1,limit:25},e.prev=1,e.next=4,Promise.all([(0,l.getReactions)(n),(0,l.getReactionsByType)(n,t)]);case 4:s=e.sent,o=(0,r.Z)(s,2),i=o[0].data.data,u=o[1].data.data,_(i),g(u),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),(0,c.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 15:return e.prev=15,w(!0),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var s,r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={page:1,limit:25,type:t},e.prev=1,e.next=4,(0,l.getReactionsByType)(n,s);case 4:r=e.sent,o=r.data.data,C(t),g(o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,c.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}();return(0,d.jsx)(c.Modal,{isOpen:R,toggle:function(){t(),w(!1)},children:(0,d.jsxs)("div",{className:u.default.popup,children:[(0,d.jsxs)("div",{className:u.default.reactions,children:[(0,d.jsx)("div",{className:u.default.all,onClick:function(){return Z()},children:(0,d.jsx)("span",{children:"All"})}),null===f||void 0===f?void 0:f.map((function(e,n){var t=e.reaction,a=e.total;return(0,d.jsxs)("div",{className:u.default.card,onClick:function(){return Z(t)},children:[(0,d.jsx)("img",{src:(0,i.getReactionUrl)(t),loading:"lazy",alt:""}),(0,d.jsx)("span",{children:a})]},n)}))]}),(0,d.jsx)("div",{className:u.default.users,children:x.map((function(e,n){var t=e.avatar,a=(e.email,e._id),s=e.name,r=e.status,o=(e.date,e.colorCode);return(0,d.jsxs)("div",{className:u.default.card,children:[(0,d.jsx)(c.Avatar,{name:s,size:40,status:r,userId:a,src:t||o}),(0,d.jsx)("span",{children:s})]},n)}))})]})})}},7121:function(e,n,t){t.r(n);var a=t(4165),s=t(5861),r=t(885),o=t(2791),c=t(9930),i=t(3537),l=t(7321),u=t(184);n.default=function(e){var n=e.clearMsgId,t=e.msgId,d=(0,o.useState)([]),p=(0,r.Z)(d,2),m=p[0],f=p[1],_=(0,o.useState)(!1),v=(0,r.Z)(_,2),h=v[0],x=v[1];(0,o.useEffect)((function(){t&&g(1).finally((function(){return x(!0)}))}),[t]);var g=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var s,r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={page:n,limit:25},e.prev=1,e.next=4,(0,i.getSeenByMsgId)(t,s);case 4:r=e.sent,o=r.data.data,f(o),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,c.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,u.jsx)(c.Modal,{isOpen:h,toggle:function(){n(),x(!1)},children:(0,u.jsxs)("div",{className:l.default.popup,children:[(0,u.jsx)("div",{className:l.default.reactions,children:(0,u.jsx)("div",{className:l.default.all,children:(0,u.jsx)("span",{children:"Seen"})})}),(0,u.jsx)("div",{className:l.default.users,children:m.map((function(e,n){var t=e.avatar,a=(e.email,e._id),s=e.name,r=e.status,o=(e.date,e.colorCode);return(0,u.jsxs)("div",{className:l.default.card,children:[(0,u.jsx)(c.Avatar,{name:s,size:40,status:r,userId:a,src:t||o}),(0,u.jsx)("span",{children:s})]},n)}))})]})})}},2775:function(e,n,t){t.r(n),t.d(n,{Conversation:function(){return v}});var a=t(1413),s=t(4942),r=t(885),o=t(2791),c=t(2703),i=t(2611),l=t(714),u=t(2426),d=t.n(u),p=t(8527),m=t(5698),f=t(7121),_=t(184),v=function(e){var n=e.chats,t=e.onDelete,u=e.onCopy,v=e.onReply,h=e.userId,x=e.focusMsgById,g=e.unReadMsg,j=e.isGroupChat,y=e.reactionList,C=e.handleReaction,N=(0,o.useState)(),k=(0,r.Z)(N,2),R=k[0],w=k[1],I=(0,o.useState)(),Z=(0,r.Z)(I,2),b=Z[0],D=Z[1];return(0,_.jsxs)(o.Fragment,{children:[n.map((function(e,r){var m=e.day,f=e.messages;return(0,_.jsxs)(o.Fragment,{children:[(0,_.jsx)("div",{className:p.default.date,children:(0,_.jsx)("span",{children:d()(m).format("D MMMM YYYY")})}),(0,_.jsx)("div",{className:p.default.container,index:r,children:f.map((function(e,m){var N=e.msg,k=e.date,R=e.sender,I=(R=void 0===R?{}:R).id,Z=R.name,b=(R.avatar,R.colorCode),S=e._id,M=e.seen,P=e.reply,B=void 0===P?null:P,T=e.reactions,z=e.totalReactions;return(0,_.jsxs)(o.Fragment,{children:[g.id&&g.id===S&&(0,_.jsx)("div",{className:p.default.unread_msg,children:(0,_.jsxs)("span",{children:[g.total," Unread Message",g.total>1&&"s"]})}),(0,_.jsxs)("div",(0,a.Z)((0,a.Z)((0,a.Z)({className:(0,c.classNames)(p.default.chat_wrapper,(0,s.Z)({},p.default.end,h===I)),msgid:S},0===r&&0===m&&{first:""}),r===n.length-1&&m===f.length-1&&{last:""}),{},{children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:p.default.chat_card,children:[B&&(0,_.jsx)("div",{className:p.default.reply_card,onClick:function(){return x(S,"smooth",B)},children:(0,_.jsx)("span",{children:B.msg})}),(0,_.jsxs)("div",{id:"reaction-".concat(S),children:[j&&I!==h&&(0,_.jsx)("span",{style:{color:b},className:p.default.user_name,children:Z.split(" ")[0]}),(0,_.jsx)("span",{children:N})]}),(0,_.jsxs)("div",{className:p.default.msg_time,children:[(0,_.jsx)("i",{className:"bx-time ".concat(p.default.clock)}),(0,_.jsx)("span",{children:d()(new Date(k)).format("h:mm a")}),h===I&&(0,_.jsx)("i",{className:"bx bx-check-double ".concat(p.default.tick),seen:M.toString(),onClick:function(){return D(S)}})]})]}),(0,_.jsx)("div",{className:p.default.options,children:(0,_.jsx)("i",{className:"bx-dots-vertical-rounded",id:"option-".concat(S)})})]}),z>0&&(0,_.jsxs)("div",{className:p.default.reactions,onClick:function(){return w(S)},children:[Object.keys(T).map((function(e,n){return(0,_.jsx)("img",{src:(0,c.getReactionUrl)(e),loading:"lazy",alt:""},n)})),(0,_.jsx)("span",{children:z})]})]})),(0,_.jsx)(l.Options,{selector:"#option-".concat(S),onCopy:u,onReply:function(){return v(e)},onDelete:t,date:k,msgId:S,msg:N}),(0,_.jsx)(i.Reaction,{selector:"#reaction-".concat(S),reactions:y,onClick:function(e){return C(e,S,r)}})]},S)}))})]},r)})),(0,_.jsx)(m.default,{msgId:R,clearMsgId:w}),(0,_.jsx)(f.default,{msgId:b,clearMsgId:D})]})}},3537:function(e,n,t){t.r(n),t.d(n,{createMessage:function(){return r},getReactions:function(){return o},getReactionsByType:function(){return c},getSeenByMsgId:function(){return i}});var a=t(9599),s=t(8830),r=function(e,n){return(0,a.axios)({url:"".concat(s.endpoints.message.createMessage,"/").concat(e),method:"post",data:n})},o=function(e){return(0,a.axios)({url:"".concat(s.endpoints.message.getReaction,"/").concat(e),method:"get"})},c=function(e,n){return(0,a.axios)({url:"".concat(s.endpoints.message.getReactionByType,"/").concat(e),method:"get",params:n})},i=function(e,n){return(0,a.axios)({url:"".concat(s.endpoints.message.getSeen,"/").concat(e),method:"get",params:n})}},9599:function(e,n,t){t.r(n),t.d(n,{axios:function(){return c}});var a=t(4569),s=t.n(a),r=t(2703),o=t(8830),c=s().create({baseURL:o.baseURL});c.interceptors.request.use((function(e){var n=(0,r.cookies)().get("auth_token");return n&&(e.headers.Authorization=n),e}),(function(e){return Promise.reject(e)})),c.interceptors.response.use((function(e){return e}),(function(e){var n;return 401===e.response.status&&document.dispatchEvent(new CustomEvent("logout")),Promise.reject(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data)}))},8527:function(e,n,t){t.r(n),n.default={container:"Conversation_container__I7CJi",chat_wrapper:"Conversation_chat_wrapper__S3O8R",end:"Conversation_end__ZMbi5",chat_card:"Conversation_chat_card__jz70L",reply_card:"Conversation_reply_card__AEy90",msg_time:"Conversation_msg_time__wN53F",tick:"Conversation_tick__RkyEe",reactions:"Conversation_reactions__faDG2",user_name:"Conversation_user_name__RDhDd",clock:"Conversation_clock__y4n8i",options:"Conversation_options__WLSBI",date:"Conversation_date__ZfQTB",unread_msg:"Conversation_unread_msg__yFItk",section:"Conversation_section__wG88I",load:"Conversation_load__rqCbg"}},8263:function(e,n,t){t.r(n),n.default={container:"Reaction_container__yXj24",wrapper:"Reaction_wrapper__m5dkH"}},9417:function(e,n,t){t.r(n),n.default={popup:"ReactionPopup_popup__aIJrS",reactions:"ReactionPopup_reactions__GiKWs",all:"ReactionPopup_all__Ofebr",card:"ReactionPopup_card__i6T3l",users:"ReactionPopup_users__zmbBG"}},7321:function(e,n,t){t.r(n),n.default={popup:"SeenPopup_popup__Y4qhk",reactions:"SeenPopup_reactions__MG2fO",all:"SeenPopup_all__r9B82",users:"SeenPopup_users__L5xMC",card:"SeenPopup_card__FRfpx"}}}]);
//# sourceMappingURL=2775.8991b4dd.chunk.js.map