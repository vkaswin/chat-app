{"version":3,"file":"static/js/467.2cd64fac.chunk.js","mappings":"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","sources":["pages/Login/index.js","services/User.js","webpack://react-chat-app/./src/pages/Login/Login.module.scss?62e7"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { CheckBox, Input, PasswordInput } from \"components\";\nimport { cookies } from \"utils\";\nimport { useAuth, useRouter } from \"hooks\";\nimport { NavLink } from \"react-router-dom\";\nimport { Toast } from \"components\";\nimport { loginUser } from \"services/User\";\nimport jwtDecode from \"jwt-decode\";\nimport { socket } from \"socket\";\n\nimport styles from \"./Login.module.scss\";\n\nconst Login = () => {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n  } = useForm();\n\n  const { setUser } = useAuth();\n\n  const router = useRouter();\n\n  const cookie = cookies();\n\n  const [rememberMe, setRememberMe] = useState(false);\n\n  useEffect(() => {\n    document.addEventListener(\"keyup\", handleKeyDown);\n    let session = cookie.get(\"login_session\") ?? null;\n    if (!session) return;\n    const { email, password } = JSON.parse(session);\n    reset({ email, password });\n    setRememberMe(true);\n    return () => document.removeEventListener(\"keyup\", handleKeyDown);\n  }, []);\n\n  const handleKeyDown = ({ keyCode }) => {\n    if (keyCode !== 13) return;\n\n    handleSubmit(onSubmit)();\n  };\n\n  const onSubmit = async (data) => {\n    const { email, password } = data;\n    try {\n      let {\n        data: { token },\n      } = await loginUser(data);\n      const user = jwtDecode(token);\n      socket.init(user?.id);\n      if (rememberMe) {\n        cookie.set({\n          name: \"login_session\",\n          value: { email, password },\n          days: 14,\n        });\n      }\n      cookie.set({ name: \"authToken\", value: token, days: 7 });\n      setUser(user);\n      router.push(\"/chats\");\n    } catch (error) {\n      if (error?.message === \"User not exist\") {\n        router.push(\"/auth/register\");\n      }\n      Toast({ type: \"error\", message: error?.message });\n    }\n  };\n\n  const handleCheckBox = ({ target: { checked } }) => {\n    setRememberMe(checked);\n  };\n\n  return (\n    <div>\n      <div className={styles.login_title}>\n        <b>Welcome Back! ðŸ‘‹</b>\n        <span>Sign in to continue</span>\n      </div>\n      <div className={styles.login_field}>\n        <Input\n          label=\"Email\"\n          placeholder=\"Enter email\"\n          register={register(\"email\", {\n            required: true,\n            pattern:\n              /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/,\n          })}\n          error={errors?.email}\n          message={{\n            required: \"Please enter email id\",\n            pattern: \"Invalid email id\",\n          }}\n        />\n        <PasswordInput\n          label=\"Password\"\n          placeholder=\"Enter Password\"\n          register={register(\"password\", { required: true })}\n          error={errors.password}\n          message={{ required: \"Please enter password\" }}\n        />\n        <CheckBox\n          label=\"Remeber Me\"\n          name=\"rememberMe\"\n          onChange={handleCheckBox}\n          checked={rememberMe}\n        />\n        <button className=\"btn-primary\" onClick={handleSubmit(onSubmit)}>\n          Log In\n        </button>\n        <div className={styles.register}>\n          <span>Dont't have an account ?</span>\n          <NavLink to=\"/auth/register\">\n            <span>Register</span>\n          </NavLink>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import { axios } from \"services\";\nimport { endpoints } from \"config\";\nimport { cookies } from \"utils\";\n\nexport const loginUser = (data) => {\n  return axios({ url: endpoints.user.login, method: \"post\", data });\n};\n\nexport const registerUser = (data) => {\n  return axios({ url: endpoints.user.register, method: \"post\", data });\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"login_title\":\"Login_login_title__DtVsO\",\"login_field\":\"Login_login_field__Uyc8w\",\"register\":\"Login_register__2QbhW\"};"],"names":["useForm","register","handleSubmit","errors","formState","reset","setUser","useAuth","router","useRouter","cookie","cookies","useState","rememberMe","setRememberMe","useEffect","document","addEventListener","handleKeyDown","session","get","JSON","parse","email","password","removeEventListener","keyCode","onSubmit","data","loginUser","token","user","jwtDecode","socket","id","set","name","value","days","push","message","Toast","type","className","styles","Input","label","placeholder","required","pattern","error","PasswordInput","CheckBox","onChange","checked","target","onClick","to","axios","url","endpoints","method","registerUser"],"sourceRoot":""}