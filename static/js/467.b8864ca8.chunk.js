"use strict";(self.webpackChunkreact_chat_app=self.webpackChunkreact_chat_app||[]).push([[467,181],{66467:function(e,s,r){r.r(s);var a=r(74165),t=r(15861),n=r(70885),i=r(72791),l=r(19195),o=r(59930),c=r(2703),d=r(14717),u=r(43504),p=r(94898),h=r(30456),g=r(67181),m=r(80184);s.default=function(){var e=(0,l.cI)(),s=e.register,r=e.handleSubmit,v=e.formState.errors,f=e.reset,_=(0,d.useAuth)().setUser,x=(0,d.useRouter)(),w=(0,c.cookies)(),k=(0,i.useState)(!1),b=(0,n.Z)(k,2),j=b[0],Z=b[1];(0,i.useEffect)((function(){var e,s=null!==(e=w.get("login_session"))&&void 0!==e?e:null;if(s){var r=JSON.parse(s),a=r.email,t=r.password;f({email:a,password:t}),Z(!0)}}),[]);var y=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(s){var r,t,n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.email,t=s.password,e.prev=1,e.next=4,(0,p.loginUser)(s);case 4:n=e.sent,i=n.data.token,j&&w.set({name:"login_session",value:{email:r,password:t},days:14}),w.set({name:"authToken",value:i,days:7}),_((0,h.Z)(i)),x.push("/chats"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),"User not exist"===(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&x.push("/auth/register"),(0,o.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(s){return e.apply(this,arguments)}}();return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:g.default.login_title,children:[(0,m.jsx)("b",{children:"Welcome Back! \ud83d\udc4b"}),(0,m.jsx)("span",{children:"Sign in to continue"})]}),(0,m.jsxs)("div",{className:g.default.login_field,children:[(0,m.jsx)(o.Input,{label:"Email",placeholder:"Enter email",register:s("email",{required:!0,pattern:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}),error:null===v||void 0===v?void 0:v.email,message:{required:"Please enter email id",pattern:"Invalid email id"}}),(0,m.jsx)(o.PasswordInput,{label:"Password",placeholder:"Enter Password",register:s("password",{required:!0}),error:v.password,message:{required:"Please enter password"}}),(0,m.jsx)(o.CheckBox,{label:"Remeber Me",name:"rememberMe",onChange:function(e){var s=e.target.checked;Z(s)},checked:j}),(0,m.jsx)("button",{className:"btn-primary",onClick:r(y),children:"Log In"}),(0,m.jsxs)("div",{className:g.default.register,children:[(0,m.jsx)("span",{children:"Dont't have an account ?"}),(0,m.jsx)(u.OL,{to:"/auth/register",children:(0,m.jsx)("span",{children:"Register"})})]})]})]})}},67181:function(e,s,r){r.r(s),s.default={login_title:"Login_login_title__DtVsO",login_field:"Login_login_field__Uyc8w",register:"Login_register__2QbhW"}}}]);
//# sourceMappingURL=467.b8864ca8.chunk.js.map