"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[535,4825,6696,3475,6416,4099,9599,3487,7546],{4825:function(e,a,t){t.r(a);var s=t(9930),r=t(2791),n=t(2426),o=t.n(n),i=t(6696),c=t(184);a.default=function(e){var a=e.status,t=(e.chatId,e._id,e.user),n=t.avatar,d=t.colorCode,u=t.name,l=(t.email,t._id),p=t.status,f=e.userId,m=2*Math.PI*50,h=function(e,a){for(var t="",s=1;s<=a;s++)1===a?t="".concat(e," ").concat(m-e," "):t+=s===a?"".concat(e," ").concat(m-t.split(" ").reduce((function(e,a){return e+ +a}),e)," "):"".concat(e," ").concat(10," ");return t.trim()},v=(0,r.useMemo)((function(){if(f){var e=a.reduce((function(e,a){return-1!==a.seen.findIndex((function(e){return e.user===f}))?e+1:e}),0),t=(m-10*a.length)/a.length,s=m/4,r=a.length-e;if(e===a.length||0===e||r===a.length||0===r)return(0,c.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 104 104",children:(0,c.jsx)("circle",{cx:"52",cy:"52",r:50,fill:"none",strokeLinecap:"round",strokeDashoffset:r>1||e>1?s:"",strokeDasharray:"".concat(r>1||e>1?t:t+10," ").concat(r>1||e>1?10:"").trim(),strokeWidth:"4",stroke:0===e?"#008168":"#AFB3B9"})});var n=h(t,e),o=h(t,r),i=n.split(" "),d=+i[i.length-1]+m/4-10;return(0,c.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 104 104",children:[(0,c.jsx)("circle",{cx:"52",cy:"52",r:50,fill:"none",strokeLinecap:"round",strokeDashoffset:s,strokeDasharray:n,strokeWidth:"4",stroke:"#AFB3B9"}),(0,c.jsx)("circle",{cx:"52",cy:"52",r:50,fill:"none",strokeLinecap:"round",strokeDashoffset:d,strokeDasharray:o,strokeWidth:"4",stroke:"#008168"})]})}}),[a,f]),g=(0,r.useMemo)((function(){return o()(a.at(-1).date).startOf("hour").fromNow()}),[a]);return(0,c.jsxs)("div",{className:i.default.card,children:[(0,c.jsxs)("div",{className:i.default.avatar,children:[v,(0,c.jsx)("div",{className:i.default.profile,children:(0,c.jsx)(s.Avatar,{src:n||d,name:u,userId:l,status:p,outline:!1,size:42})})]}),(0,c.jsxs)("div",{className:i.default.user_info,children:[(0,c.jsx)("b",{children:u}),(0,c.jsx)("span",{children:g})]})]})}},3475:function(e,a,t){t.r(a);var s=t(9930),r=(t(2791),t(6416)),n=t(184);a.default=function(){var e={},a=e._id,t=void 0===a?"63033ccb39175ac026b70761":a,o=e.name,i=void 0===o?"Karthick Kumar":o,c=e.avatar,d=void 0===c?"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Favataaars%20(2).png?alt=media":c,u=e.colorCode,l=void 0===u?"#11C1DA":u;return(0,n.jsx)("div",{className:r.default.container,children:(0,n.jsxs)("div",{className:r.default.wrapper,children:[(0,n.jsxs)("div",{className:r.default.header,children:[(0,n.jsx)("div",{className:r.default.indicator}),(0,n.jsx)("div",{className:r.default.avatar,children:(0,n.jsx)(s.Avatar,{src:d||l,name:i,userId:t})})]}),(0,n.jsx)("div",{className:r.default.media,children:(0,n.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Fdownload (1).jpeg?alt=media"})}),(0,n.jsx)("div",{className:r.default.footer})]})})}},535:function(e,a,t){t.r(a);var s=t(1413),r=t(7762),n=t(4165),o=t(5861),i=t(885),c=t(2791),d=t(9930),u=t(4717),l=t(4825),p=t(3475),f=t(4099),m=t(3487),h=t(7546),v=t(184);a.default=function(){var e=(0,u.useAuth)().user,a=(0,c.useState)([{_id:"630747c05006286373ffef6d",chatId:"630349d4634d5afb324cc562",status:[{_id:"63620498b30513caf298bf64",url:"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Fdownload (1).jpeg?alt=media",date:"2022-11-02T05:48:08.367Z",seen:[{user:"6303217405f1714edcfc1cb6"}]},{_id:"6362049fb30513caf298bf66",url:"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Fdownload.jpeg?alt=media",date:"2022-11-02T05:48:15.686Z",seen:[{user:"6303217405f1714edcfc1cb6"}]},{_id:"63620498b30513caf298bf64",url:"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Fdownload (1).jpeg?alt=media",date:"2022-11-02T05:48:08.367Z",seen:[{user:"6303217405f1714edcfc1cb6"}]},{_id:"6362049fb30513caf298bf66",url:"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Fdownload.jpeg?alt=media",date:"2022-11-02T05:48:15.686Z",seen:[]},{_id:"6362049fb30513caf298bf66",url:"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Fdownload.jpeg?alt=media",date:"2022-11-02T05:48:15.686Z",seen:[]}],user:{_id:"63033ccb39175ac026b70761",name:"Karthick Kumar",email:"karthick@gmail.com",status:!1,avatar:"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Favataaars%20(2).png?alt=media",colorCode:"#11C1DA"}},{_id:"630747c05006286373ffef64",chatId:"630349d4634d5afb324cc562",status:[{_id:"63620498b30513caf298bf64",url:"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Fdownload (1).jpeg?alt=media",date:"2022-11-02T05:48:08.367Z",seen:[]},{_id:"6362049fb30513caf298bf66",url:"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Fdownload.jpeg?alt=media",date:"2022-11-02T05:48:15.686Z",seen:[]},{_id:"6362049fb30513caf298bf66",url:"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Fdownload.jpeg?alt=media",date:"2022-11-02T05:48:15.686Z",seen:[]}],user:{_id:"63033ccb39175ac026b70761",name:"Lebron James",email:"lebron@gmail.com",status:!1,avatar:"https://firebasestorage.googleapis.com/v0/b/node-chat-app-88711.appspot.com/o/image%2Favataaars%20(2).png?alt=media",colorCode:"#11C1DA"}}]),t=(0,i.Z)(a,2),g=t[0],b=(t[1],function(){var e=(0,o.Z)((0,n.Z)().mark((function e(a){var t,s,o,c,u,l,p,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.target.files,s=new FormData,o=(0,r.Z)(t);try{for(o.s();!(c=o.n()).done;)u=c.value,s.append("file",u)}catch(n){o.e(n)}finally{o.f()}return e.prev=4,e.next=7,(0,m.fileUpload)(s);case 7:return l=e.sent,p=(0,i.Z)(l.data.data,1),f=p[0],e.next=12,(0,h.createStatus)({url:f,date:(new Date).toISOString()});case 12:e.sent,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),(0,d.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(a){return e.apply(this,arguments)}}()),x=(0,c.useMemo)((function(){if(null===e||void 0===e||!e.id||0===g.length)return[{title:"Recent Updates",list:[]},{title:"Viewed Updates",list:[]}];var a=g.filter((function(a){return a.status.every((function(a){return a.seen.findIndex((function(a){var t=a.user;return e.id===t}))>=0}))}));return[{title:"Recent Updates",list:g.filter((function(a){return a.status.some((function(a){return-1==a.seen.findIndex((function(a){var t=a.user;return e.id===t}))}))}))},{title:"Viewed Updates",list:a}]}),[g,e]);return(0,v.jsxs)(c.Fragment,{children:[(0,v.jsx)(d.SearchBox,{placeholder:"Search here...",title:"Status"}),(0,v.jsxs)("div",{className:f.default.container,children:[(0,v.jsxs)("div",{className:f.default.my_status,children:[(0,v.jsxs)("div",{className:f.default.avatar,children:[(0,v.jsx)(d.Avatar,{src:(null===e||void 0===e?void 0:e.avatar)||(null===e||void 0===e?void 0:e.colorCode),name:null===e||void 0===e?void 0:e.name,size:50}),(0,v.jsx)("label",{htmlFor:"my-status",children:(0,v.jsx)("i",{className:"bx-plus"})}),(0,v.jsx)("input",{id:"my-status",type:"file",onChange:b,hidden:!0})]}),(0,v.jsxs)("div",{className:f.default.title,children:[(0,v.jsx)("b",{children:"My Status"}),(0,v.jsx)("span",{children:"Add to my status"})]}),(0,v.jsxs)("div",{className:f.default.icons,children:[(0,v.jsx)("label",{htmlFor:"my-status",children:(0,v.jsx)("i",{className:"bxs-camera"})}),(0,v.jsx)("label",{children:(0,v.jsx)("i",{className:"bxs-pencil"})})]})]}),x.map((function(a,t){var r=a.title,n=a.list;return n.length>0&&(0,v.jsxs)("div",{className:f.default.status_list,children:[(0,v.jsx)("div",{className:f.default.title,children:(0,v.jsx)("b",{children:r})}),n.map((function(a){return(0,v.jsx)(l.default,(0,s.Z)((0,s.Z)({},a),{},{userId:null===e||void 0===e?void 0:e.id}),a._id)}))]},t)}))]}),(0,v.jsx)(p.default,{})]})}},3487:function(e,a,t){t.r(a),t.d(a,{fileUpload:function(){return c},metaData:function(){return i}});var s=t(4165),r=t(5861),n=t(9599),o=t(77),i=(t(9930),function(e){var a;return(0,n.axios)({url:null===(a=o.endpoints.others)||void 0===a?void 0:a.metaData,method:"post",data:e})}),c=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(a){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.axios)({url:null===(t=o.endpoints.others)||void 0===t?void 0:t.fileUpload,method:"post",data:a}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},7546:function(e,a,t){t.r(a),t.d(a,{createStatus:function(){return n},getAllStatus:function(){return o}});var s=t(9599),r=t(77),n=function(e){return(0,s.axios)({url:r.endpoints.status.create,method:"post",data:e})},o=function(){return(0,s.axios)({url:r.endpoints.status.allStatus,method:"get"})}},9599:function(e,a,t){t.r(a),t.d(a,{axios:function(){return i}});var s=t(4569),r=t.n(s),n=t(2703),o=t(77),i=r().create({baseURL:o.baseURL});i.interceptors.request.use((function(e){var a=(0,n.cookies)().get("auth_token");return a&&(e.headers.Authorization=a),e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e}),(function(e){var a;return 401===e.response.status&&document.dispatchEvent(new CustomEvent("logout")),Promise.reject(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data)}))},6696:function(e,a,t){t.r(a),a.default={card:"StatusCard_card__Jawxr",avatar:"StatusCard_avatar__lHmGe",profile:"StatusCard_profile__fuCNK",user_info:"StatusCard_user_info__K2NI+"}},6416:function(e,a,t){t.r(a),a.default={container:"StatusPopup_container__7qNO9",wrapper:"StatusPopup_wrapper__ixYB-",media:"StatusPopup_media__uB6Jz"}},4099:function(e,a,t){t.r(a),a.default={container:"Status_container__0HXkP",my_status:"Status_my_status__vZYFx",avatar:"Status_avatar__u67au",title:"Status_title__+XhuX",icons:"Status_icons__hmUWq",status_list:"Status_status_list__vHjTa"}}}]);
//# sourceMappingURL=535.45f4ce6d.chunk.js.map