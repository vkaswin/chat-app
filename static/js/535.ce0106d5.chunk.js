"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[535,4825,6696,3475,6416,4099,9599,3487,7546],{4825:function(a,e,t){t.r(e);var s=t(9930),r=t(2791),n=t(2426),o=t.n(n),i=t(6696),c=t(184);e.default=function(a){var e=a.status,t=(a.chatId,a._id,a.user),n=t.avatar,d=t.colorCode,u=t.name,l=(t.email,t._id),p=t.status,f=a.userId,m=2*Math.PI*50,h=function(a,e){for(var t="",s=1;s<=e;s++)1===e?t="".concat(a," ").concat(m-a," "):t+=s===e?"".concat(a," ").concat(m-t.split(" ").reduce((function(a,e){return a+ +e}),a)," "):"".concat(a," ").concat(10," ");return t.trim()},v=(0,r.useMemo)((function(){if(f){var a=e.reduce((function(a,e){return-1!==e.seen.findIndex((function(a){return a.user===f}))?a+1:a}),0),t=(m-10*e.length)/e.length,s=m/4,r=e.length-a;if(a===e.length||0===a||r===e.length||0===r)return(0,c.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 104 104",children:(0,c.jsx)("circle",{cx:"52",cy:"52",r:50,fill:"none",strokeLinecap:"round",strokeDashoffset:r>1||a>1?s:"",strokeDasharray:"".concat(r>1||a>1?t:t+10," ").concat(r>1||a>1?10:"").trim(),strokeWidth:"4",stroke:0===a?"#008168":"#AFB3B9"})});var n=h(t,a),o=h(t,r),i=n.split(" "),d=+i[i.length-1]+m/4-10;return(0,c.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 104 104",children:[(0,c.jsx)("circle",{cx:"52",cy:"52",r:50,fill:"none",strokeLinecap:"round",strokeDashoffset:s,strokeDasharray:n,strokeWidth:"4",stroke:"#AFB3B9"}),(0,c.jsx)("circle",{cx:"52",cy:"52",r:50,fill:"none",strokeLinecap:"round",strokeDashoffset:d,strokeDasharray:o,strokeWidth:"4",stroke:"#008168"})]})}}),[e,f]),g=(0,r.useMemo)((function(){return o()(e.at(-1).date).startOf("hour").fromNow()}),[e]);return(0,c.jsxs)("div",{className:i.default.card,children:[(0,c.jsxs)("div",{className:i.default.avatar,children:[v,(0,c.jsx)("div",{className:i.default.profile,children:(0,c.jsx)(s.Avatar,{src:n||d,name:u,userId:l,status:p,outline:!1,size:42})})]}),(0,c.jsxs)("div",{className:i.default.user_info,children:[(0,c.jsx)("b",{children:u}),(0,c.jsx)("span",{children:g})]})]})}},3475:function(a,e,t){t.r(e);var s=t(9930),r=(t(2791),t(6416)),n=t(184);e.default=function(){var a={},e=a._id,t=void 0===e?"63033ccb39175ac026b70761":e,o=a.name,i=void 0===o?"Karthick Kumar":o,c=a.avatar,d=void 0===c?"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Favataaars%20(2).png?alt=media":c,u=a.colorCode,l=void 0===u?"#11C1DA":u;return(0,n.jsx)("div",{className:r.default.container,children:(0,n.jsxs)("div",{className:r.default.wrapper,children:[(0,n.jsxs)("div",{className:r.default.header,children:[(0,n.jsx)("div",{className:r.default.indicator}),(0,n.jsx)("div",{className:r.default.avatar,children:(0,n.jsx)(s.Avatar,{src:d||l,name:i,userId:t})})]}),(0,n.jsx)("div",{className:r.default.media,children:(0,n.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Fdownload (1).jpeg?alt=media"})}),(0,n.jsx)("div",{className:r.default.footer})]})})}},535:function(a,e,t){t.r(e);var s=t(1413),r=t(7762),n=t(4165),o=t(5861),i=t(885),c=t(2791),d=t(9930),u=t(4717),l=t(4825),p=t(3475),f=t(4099),m=t(3487),h=t(7546),v=t(184);e.default=function(){var a=(0,u.useAuth)().user,e=(0,c.useState)([{_id:"630747c05006286373ffef6d",chatId:"630349d4634d5afb324cc562",status:[{_id:"63620498b30513caf298bf64",url:"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Fdownload (1).jpeg?alt=media",date:"2022-11-02T05:48:08.367Z",seen:[{user:"6303217405f1714edcfc1cb6"}]},{_id:"6362049fb30513caf298bf66",url:"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Fdownload.jpeg?alt=media",date:"2022-11-02T05:48:15.686Z",seen:[{user:"6303217405f1714edcfc1cb6"}]},{_id:"63620498b30513caf298bf64",url:"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Fdownload (1).jpeg?alt=media",date:"2022-11-02T05:48:08.367Z",seen:[{user:"6303217405f1714edcfc1cb6"}]},{_id:"6362049fb30513caf298bf66",url:"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Fdownload.jpeg?alt=media",date:"2022-11-02T05:48:15.686Z",seen:[]},{_id:"6362049fb30513caf298bf66",url:"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Fdownload.jpeg?alt=media",date:"2022-11-02T05:48:15.686Z",seen:[]}],user:{_id:"63033ccb39175ac026b70761",name:"Karthick Kumar",email:"karthick@gmail.com",status:!1,avatar:"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Favataaars%20(2).png?alt=media",colorCode:"#11C1DA"}},{_id:"630747c05006286373ffef64",chatId:"630349d4634d5afb324cc562",status:[{_id:"63620498b30513caf298bf64",url:"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Fdownload (1).jpeg?alt=media",date:"2022-11-02T05:48:08.367Z",seen:[]},{_id:"6362049fb30513caf298bf66",url:"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Fdownload.jpeg?alt=media",date:"2022-11-02T05:48:15.686Z",seen:[]},{_id:"6362049fb30513caf298bf66",url:"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Fdownload.jpeg?alt=media",date:"2022-11-02T05:48:15.686Z",seen:[]}],user:{_id:"63033ccb39175ac026b70761",name:"Lebron James",email:"lebron@gmail.com",status:!1,avatar:"https://firebasestorage.googleapis.com/v0/b/chat-app-d7a32.appspot.com/o/image%2Favataaars%20(2).png?alt=media",colorCode:"#11C1DA"}}]),t=(0,i.Z)(e,2),g=t[0],b=(t[1],function(){var a=(0,o.Z)((0,n.Z)().mark((function a(e){var t,s,o,c,u,l,p,f;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=e.target.files,s=new FormData,o=(0,r.Z)(t);try{for(o.s();!(c=o.n()).done;)u=c.value,s.append("file",u)}catch(n){o.e(n)}finally{o.f()}return a.prev=4,a.next=7,(0,m.fileUpload)(s);case 7:return l=a.sent,p=(0,i.Z)(l.data.data,1),f=p[0],a.next=12,(0,h.createStatus)({url:f,date:(new Date).toISOString()});case 12:a.sent,a.next=18;break;case 15:a.prev=15,a.t0=a.catch(4),(0,d.Toast)({type:"error",message:null===a.t0||void 0===a.t0?void 0:a.t0.message});case 18:case"end":return a.stop()}}),a,null,[[4,15]])})));return function(e){return a.apply(this,arguments)}}()),x=(0,c.useMemo)((function(){if(null===a||void 0===a||!a.id||0===g.length)return[{title:"Recent Updates",list:[]},{title:"Viewed Updates",list:[]}];var e=g.filter((function(e){return e.status.every((function(e){return e.seen.findIndex((function(e){var t=e.user;return a.id===t}))>=0}))}));return[{title:"Recent Updates",list:g.filter((function(e){return e.status.some((function(e){return-1==e.seen.findIndex((function(e){var t=e.user;return a.id===t}))}))}))},{title:"Viewed Updates",list:e}]}),[g,a]);return(0,v.jsxs)(c.Fragment,{children:[(0,v.jsx)(d.SearchBox,{placeholder:"Search here...",title:"Status"}),(0,v.jsxs)("div",{className:f.default.container,children:[(0,v.jsxs)("div",{className:f.default.my_status,children:[(0,v.jsxs)("div",{className:f.default.avatar,children:[(0,v.jsx)(d.Avatar,{src:(null===a||void 0===a?void 0:a.avatar)||(null===a||void 0===a?void 0:a.colorCode),name:null===a||void 0===a?void 0:a.name,size:50}),(0,v.jsx)("label",{htmlFor:"my-status",children:(0,v.jsx)("i",{className:"bx-plus"})}),(0,v.jsx)("input",{id:"my-status",type:"file",onChange:b,hidden:!0})]}),(0,v.jsxs)("div",{className:f.default.title,children:[(0,v.jsx)("b",{children:"My Status"}),(0,v.jsx)("span",{children:"Add to my status"})]}),(0,v.jsxs)("div",{className:f.default.icons,children:[(0,v.jsx)("label",{htmlFor:"my-status",children:(0,v.jsx)("i",{className:"bxs-camera"})}),(0,v.jsx)("label",{children:(0,v.jsx)("i",{className:"bxs-pencil"})})]})]}),x.map((function(e,t){var r=e.title,n=e.list;return n.length>0&&(0,v.jsxs)("div",{className:f.default.status_list,children:[(0,v.jsx)("div",{className:f.default.title,children:(0,v.jsx)("b",{children:r})}),n.map((function(e){return(0,v.jsx)(l.default,(0,s.Z)((0,s.Z)({},e),{},{userId:null===a||void 0===a?void 0:a.id}),e._id)}))]},t)}))]}),(0,v.jsx)(p.default,{})]})}},3487:function(a,e,t){t.r(e),t.d(e,{fileUpload:function(){return c},metaData:function(){return i}});var s=t(4165),r=t(5861),n=t(9599),o=t(77),i=(t(9930),function(a){var e;return(0,n.axios)({url:null===(e=o.endpoints.others)||void 0===e?void 0:e.metaData,method:"post",data:a})}),c=function(){var a=(0,r.Z)((0,s.Z)().mark((function a(e){var t;return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.axios)({url:null===(t=o.endpoints.others)||void 0===t?void 0:t.fileUpload,method:"post",data:e}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},7546:function(a,e,t){t.r(e),t.d(e,{createStatus:function(){return n},getAllStatus:function(){return o}});var s=t(9599),r=t(77),n=function(a){return(0,s.axios)({url:r.endpoints.status.create,method:"post",data:a})},o=function(){return(0,s.axios)({url:r.endpoints.status.allStatus,method:"get"})}},9599:function(a,e,t){t.r(e),t.d(e,{axios:function(){return i}});var s=t(4569),r=t.n(s),n=t(2703),o=t(77),i=r().create({baseURL:o.baseURL});i.interceptors.request.use((function(a){var e=(0,n.cookies)().get("auth_token");return e&&(a.headers.Authorization=e),a}),(function(a){return Promise.reject(a)})),i.interceptors.response.use((function(a){return a}),(function(a){var e;return 401===a.response.status&&document.dispatchEvent(new CustomEvent("logout")),Promise.reject(null===a||void 0===a||null===(e=a.response)||void 0===e?void 0:e.data)}))},6696:function(a,e,t){t.r(e),e.default={card:"StatusCard_card__Jawxr",avatar:"StatusCard_avatar__lHmGe",profile:"StatusCard_profile__fuCNK",user_info:"StatusCard_user_info__K2NI+"}},6416:function(a,e,t){t.r(e),e.default={container:"StatusPopup_container__7qNO9",wrapper:"StatusPopup_wrapper__ixYB-",media:"StatusPopup_media__uB6Jz"}},4099:function(a,e,t){t.r(e),e.default={container:"Status_container__0HXkP",my_status:"Status_my_status__vZYFx",avatar:"Status_avatar__u67au",title:"Status_title__+XhuX",icons:"Status_icons__hmUWq",status_list:"Status_status_list__vHjTa"}}}]);
//# sourceMappingURL=535.ce0106d5.chunk.js.map