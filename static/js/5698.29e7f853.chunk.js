"use strict";(self.webpackChunkreact_chat_app=self.webpackChunkreact_chat_app||[]).push([[5698,9417,9599,3537],{5698:function(e,t,n){n.r(t);var a=n(4165),r=n(5861),s=n(885),c=n(2791),o=n(9930),i=n(2703),u=n(3537),l=n(9417),p=n(184);t.default=function(e){var t=e.isOpen,n=e.toggle,d=e.msgId,f=(0,c.useState)([]),v=(0,s.Z)(f,2),m=v[0],g=v[1],h=(0,c.useState)([]),x=(0,s.Z)(h,2),_=x[0],y=x[1],R=(0,c.useState)(),j=(0,s.Z)(R,2),k=(j[0],j[1]);(0,c.useEffect)((function(){t&&Z()}),[t,d]);var Z=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n,r,c,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={page:1,limit:25},e.prev=1,e.next=4,Promise.all([(0,u.getReactions)(d),(0,u.getReactionsByType)(d,t)]);case 4:n=e.sent,r=(0,s.Z)(n,2),c=r[0].data.data,i=r[1].data.data,g(c),y(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),(0,o.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={page:1,limit:25,type:t},e.prev=1,e.next=4,(0,u.getReactionsByType)(d,n);case 4:r=e.sent,s=r.data.data,k(t),y(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,o.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsx)(o.Modal,{isOpen:t,toggle:n,children:(0,p.jsxs)("div",{className:l.default.popup,children:[(0,p.jsxs)("div",{className:l.default.reactions,children:[(0,p.jsx)("div",{className:l.default.all,onClick:function(){return b()},children:(0,p.jsx)("span",{children:"All"})}),null===m||void 0===m?void 0:m.map((function(e,t){var n=e.reaction,a=e.total;return(0,p.jsxs)("div",{className:l.default.card,onClick:function(){return b(n)},children:[(0,p.jsx)("img",{src:(0,i.getReactionUrl)(n),loading:"lazy",alt:""}),(0,p.jsx)("span",{children:a})]},t)}))]}),(0,p.jsx)("div",{className:l.default.users,children:_.map((function(e,t){var n=e.avatar,a=(e.email,e.id),r=e.name,s=e.status,c=(e.date,e.colorCode);return(0,p.jsxs)("div",{className:l.default.card,children:[(0,p.jsx)(o.Avatar,{name:r,size:40,status:s,userId:a,src:n||c}),(0,p.jsx)("span",{children:r})]},t)}))})]})})}},3537:function(e,t,n){n.r(t),n.d(t,{createMessage:function(){return s},getReactions:function(){return c},getReactionsByType:function(){return o},getSeenByMsgId:function(){return i}});var a=n(9599),r=n(77),s=function(e,t){return(0,a.axios)({url:"".concat(r.endpoints.message.createMessage,"/").concat(e),method:"post",data:t})},c=function(e){return(0,a.axios)({url:"".concat(r.endpoints.message.getReaction,"/").concat(e),method:"get"})},o=function(e,t){return(0,a.axios)({url:"".concat(r.endpoints.message.getReactionByType,"/").concat(e),method:"get",params:t})},i=function(e,t){return(0,a.axios)({url:"".concat(r.endpoints.message.getSeen,"/").concat(e),method:"get",params:t})}},9599:function(e,t,n){n.r(t),n.d(t,{axios:function(){return o}});var a=n(4569),r=n.n(a),s=n(2703),c=n(77),o=r().create({baseURL:c.baseURL});o.interceptors.request.use((function(e){var t=(0,s.cookies)().get("authToken");return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){var t;return 401===e.response.status&&document.dispatchEvent(new CustomEvent("logout")),Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},9417:function(e,t,n){n.r(t),t.default={popup:"ReactionPopup_popup__aIJrS",reactions:"ReactionPopup_reactions__GiKWs",all:"ReactionPopup_all__Ofebr",card:"ReactionPopup_card__i6T3l",users:"ReactionPopup_users__zmbBG"}}}]);
//# sourceMappingURL=5698.29e7f853.chunk.js.map