"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[5698,9417,9599,3537],{5698:function(e,t,n){n.r(t);var a=n(4165),r=n(5861),s=n(885),c=n(2791),o=n(9930),i=n(2703),u=n(3537),l=n(9417),d=n(184);t.default=function(e){var t=e.msgId,n=e.clearMsgId,p=(0,c.useState)([]),f=(0,s.Z)(p,2),v=f[0],m=f[1],g=(0,c.useState)([]),h=(0,s.Z)(g,2),x=h[0],_=h[1],y=(0,c.useState)(),R=(0,s.Z)(y,2),j=(R[0],R[1]),k=(0,c.useState)(!1),Z=(0,s.Z)(k,2),b=Z[0],P=Z[1];(0,c.useEffect)((function(){t&&w()}),[t]);var w=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var n,r,c,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={page:1,limit:25},e.prev=1,e.next=4,Promise.all([(0,u.getReactions)(t),(0,u.getReactionsByType)(t,n)]);case 4:r=e.sent,c=(0,s.Z)(r,2),i=c[0].data.data,l=c[1].data.data,m(i),_(l),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),(0,o.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 15:return e.prev=15,P(!0),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var r,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={page:1,limit:25,type:n},e.prev=1,e.next=4,(0,u.getReactionsByType)(t,r);case 4:s=e.sent,c=s.data.data,j(n),_(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,o.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return(0,d.jsx)(o.Modal,{isOpen:b,toggle:function(){n(),P(!1)},children:(0,d.jsxs)("div",{className:l.default.popup,children:[(0,d.jsxs)("div",{className:l.default.reactions,children:[(0,d.jsx)("div",{className:l.default.all,onClick:function(){return S()},children:(0,d.jsx)("span",{children:"All"})}),null===v||void 0===v?void 0:v.map((function(e,t){var n=e.reaction,a=e.total;return(0,d.jsxs)("div",{className:l.default.card,onClick:function(){return S(n)},children:[(0,d.jsx)("img",{src:(0,i.getReactionUrl)(n),loading:"lazy",alt:""}),(0,d.jsx)("span",{children:a})]},t)}))]}),(0,d.jsx)("div",{className:l.default.users,children:x.map((function(e,t){var n=e.avatar,a=(e.email,e._id),r=e.name,s=e.status,c=(e.date,e.colorCode);return(0,d.jsxs)("div",{className:l.default.card,children:[(0,d.jsx)(o.Avatar,{name:r,size:40,status:s,userId:a,src:n||c}),(0,d.jsx)("span",{children:r})]},t)}))})]})})}},3537:function(e,t,n){n.r(t),n.d(t,{createMessage:function(){return s},getReactions:function(){return c},getReactionsByType:function(){return o},getSeenByMsgId:function(){return i}});var a=n(9599),r=n(77),s=function(e,t){return(0,a.axios)({url:"".concat(r.endpoints.message.createMessage,"/").concat(e),method:"post",data:t})},c=function(e){return(0,a.axios)({url:"".concat(r.endpoints.message.getReaction,"/").concat(e),method:"get"})},o=function(e,t){return(0,a.axios)({url:"".concat(r.endpoints.message.getReactionByType,"/").concat(e),method:"get",params:t})},i=function(e,t){return(0,a.axios)({url:"".concat(r.endpoints.message.getSeen,"/").concat(e),method:"get",params:t})}},9599:function(e,t,n){n.r(t),n.d(t,{axios:function(){return o}});var a=n(4569),r=n.n(a),s=n(2703),c=n(77),o=r().create({baseURL:c.baseURL});o.interceptors.request.use((function(e){var t=(0,s.cookies)().get("auth_token");return t&&(e.headers.Authorization=t),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){var t;return 401===e.response.status&&document.dispatchEvent(new CustomEvent("logout")),Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},9417:function(e,t,n){n.r(t),t.default={popup:"ReactionPopup_popup__aIJrS",reactions:"ReactionPopup_reactions__GiKWs",all:"ReactionPopup_all__Ofebr",card:"ReactionPopup_card__i6T3l",users:"ReactionPopup_users__zmbBG"}}}]);
//# sourceMappingURL=5698.8916d0d2.chunk.js.map