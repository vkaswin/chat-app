"use strict";(self.webpackChunkreact_chat_app=self.webpackChunkreact_chat_app||[]).push([[6467,7181,9599,4898],{6467:function(e,r,t){t.r(r);var n=t(4165),s=t(5861),a=t(885),i=t(2791),o=t(9195),u=t(9930),l=t(2703),c=t(4717),d=t(3504),p=t(4898),m=t(456),v=t(9102),h=t(7181),f=t(184);r.default=function(){var e=(0,o.cI)(),r=e.register,t=e.handleSubmit,g=e.formState.errors,_=e.reset,x=(0,c.useAuth)().setUser,k=(0,c.useRouter)(),w=(0,l.cookies)(),b=(0,i.useState)(!1),j=(0,a.Z)(b,2),y=j[0],L=j[1];(0,i.useEffect)((function(){var e;document.addEventListener("keyup",E);var r=null!==(e=w.get("login_session"))&&void 0!==e?e:null;if(r){var t=JSON.parse(r),n=t.email,s=t.password;return _({email:n,password:s}),L(!0),function(){return document.removeEventListener("keyup",E)}}}),[]);var E=function(e){13===e.keyCode&&t(U)()},U=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var t,s,a,i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.email,s=r.password,e.prev=1,e.next=4,(0,p.loginUser)(r);case 4:a=e.sent,i=a.data.token,o=(0,m.Z)(i),y&&w.set({name:"login_session",value:{email:t,password:s},days:14}),w.set({name:"authToken",value:i,days:7}),v.socket.init(),x(o),k.push("/chats"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),"User not exist"===(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&k.push("/register"),(0,u.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(r){return e.apply(this,arguments)}}();return(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:h.default.login_title,children:[(0,f.jsx)("b",{children:"Welcome Back! \ud83d\udc4b"}),(0,f.jsx)("span",{children:"Sign in to continue"})]}),(0,f.jsxs)("div",{className:h.default.login_field,children:[(0,f.jsx)(u.Input,{label:"Email",placeholder:"Enter email",register:r("email",{required:!0,pattern:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}),error:null===g||void 0===g?void 0:g.email,message:{required:"Please enter email id",pattern:"Invalid email id"}}),(0,f.jsx)(u.PasswordInput,{label:"Password",placeholder:"Enter Password",register:r("password",{required:!0}),error:g.password,message:{required:"Please enter password"}}),(0,f.jsx)(u.CheckBox,{label:"Remeber Me",name:"rememberMe",onChange:function(e){var r=e.target.checked;L(r)},checked:y}),(0,f.jsx)("button",{className:"btn-primary",onClick:t(U),children:"Log In"}),(0,f.jsxs)("div",{className:h.default.register,children:[(0,f.jsx)("span",{children:"Dont't have an account ?"}),(0,f.jsx)(d.OL,{to:"/register",children:(0,f.jsx)("span",{children:"Register"})})]})]})]})}},4898:function(e,r,t){t.r(r),t.d(r,{loginUser:function(){return a},registerUser:function(){return i}});var n=t(9599),s=t(77),a=(t(2703),function(e){return(0,n.axios)({url:s.endpoints.user.login,method:"post",data:e})}),i=function(e){return(0,n.axios)({url:s.endpoints.user.register,method:"post",data:e})}},9599:function(e,r,t){t.r(r),t.d(r,{axios:function(){return o}});var n=t(4569),s=t.n(n),a=t(2703),i=t(77),o=s().create({baseURL:i.baseURL});o.interceptors.request.use((function(e){var r=(0,a.cookies)().get("authToken");return r&&(e.headers.Authorization=r),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){var r;return 401===e.response.status&&document.dispatchEvent(new CustomEvent("logout")),Promise.reject(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data)}))},7181:function(e,r,t){t.r(r),r.default={login_title:"Login_login_title__DtVsO",login_field:"Login_login_field__Uyc8w",register:"Login_register__2QbhW"}}}]);
//# sourceMappingURL=6467.824b8124.chunk.js.map