"use strict";(self.webpackChunkreact_chat_app=self.webpackChunkreact_chat_app||[]).push([[6467,7181,3739],{66467:function(e,r,t){t.r(r);var n=t(74165),s=t(15861),a=t(70885),i=t(72791),o=t(19195),l=t(59930),u=t(2703),d=t(14717),c=t(43504),h=t(13739),p=t(67181),g=t(80184);r.default=function(){var e=(0,o.cI)(),r=e.register,t=e.handleSubmit,m=e.formState.errors,f=(0,d.useRouter)(),v=(0,i.useState)(!1),_=(0,a.Z)(v,2),x=_[0],k=_[1];(0,i.useEffect)((function(){var e,r=null!==(e=(0,u.getCookie)("login_session"))&&void 0!==e?e:{},t=r.email,n=void 0===t?null:t,s=r.password;n&&(void 0===s?null:s)&&k(!0)}),[]);var w=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var t,s,a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.email,s=r.password,e.prev=1,e.next=4,(0,h.loginUser)(r);case 4:a=e.sent,i=a.data.token,x&&(0,u.setCookie)({name:"login_session",value:{email:t,password:s},days:14}),(0,u.setCookie)({name:"authToken",value:i,days:7}),f.push("/chats"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),"User not exist"===(null===e.t0||void 0===e.t0?void 0:e.t0.message)&&f.push("/auth/register"),(0,l.Toast)({type:"error",message:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(r){return e.apply(this,arguments)}}();return(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:p.default.login_title,children:[(0,g.jsx)("b",{children:"Welcome Back! \ud83d\udc4b"}),(0,g.jsx)("span",{children:"Sign in to continue"})]}),(0,g.jsxs)("div",{className:p.default.login_field,children:[(0,g.jsx)(l.Input,{label:"Email",placeholder:"Enter email",register:r("email",{required:!0,pattern:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/}),error:null===m||void 0===m?void 0:m.email,message:{required:"Please enter email id",pattern:"Invalid email id"}}),(0,g.jsx)(l.PasswordInput,{label:"Password",placeholder:"Enter Password",register:r("password",{required:!0}),error:m.password,message:{required:"Please enter password"}}),(0,g.jsx)(l.CheckBox,{label:"Remeber Me",name:"rememberMe",onChange:function(e){var r=e.target.checked;k(r)},checked:x}),(0,g.jsx)("button",{className:"btn-primary",onClick:t(w),children:"Log In"}),(0,g.jsxs)("div",{className:p.default.register,children:[(0,g.jsx)("span",{children:"Dont't have an account ?"}),(0,g.jsx)(c.OL,{to:"/auth/register",children:(0,g.jsx)("span",{children:"Register"})})]})]})]})}},13739:function(e,r,t){t.r(r),t.d(r,{loginUser:function(){return a},registerUser:function(){return i}});var n=t(39599),s=t(40077),a=function(e){return(0,n.axios)({url:s.endpoints.auth.login,method:"post",data:e})},i=function(e){return(0,n.axios)({url:s.endpoints.auth.register,method:"post",data:e})}},67181:function(e,r,t){t.r(r),r.default={login_title:"Login_login_title__DtVsO",login_field:"Login_login_field__Uyc8w",register:"Login_register__2QbhW"}}}]);
//# sourceMappingURL=6467.d5e247eb.chunk.js.map